<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ—å°å›¾ä¹¦é¦† - 3Dæ²‰æµ¸å¼å±•è§ˆ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- æ£€æŸ¥æ˜¯å¦å·²ç»å®ŒæˆåŠ è½½ï¼Œå¦‚æœæ²¡æœ‰å®Œæˆï¼Œåˆ™è·³è½¬åˆ°loadingé¡µé¢ -->
    <script>
        // æ£€æŸ¥æ˜¯å¦ä»åŠ è½½é¡µé¢è·³è½¬è€Œæ¥
        if (!sessionStorage.getItem('loadingCompleted')) {
            sessionStorage.setItem('loadingCompleted', 'true');
            window.location.href = 'loading.html';
        }
    </script>
</head>

<body>
    
    <div class="container">
        <!-- èƒŒæ™¯è£…é¥° -->
        <div class="background-gradient"></div>
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>

        <!-- ä¸»å†…å®¹ -->
        <header class="header">
            <h1 class="title">åŒ—å°å›¾ä¹¦é¦†</h1>
            <p class="subtitle">3Dé«˜æ–¯æ³¼æº… Â· æ²‰æµ¸å¼å±•è§ˆ</p>
        </header>

        <main class="main-content">
            <div class="welcome-section">
                <p class="welcome-text">
                    æ¬¢è¿æ¢ç´¢åŒ—äº¬å°åˆ·å­¦é™¢å›¾ä¹¦é¦†çš„æ•°å­—å­ªç”Ÿç©ºé—´<br>
                    å‰æ²¿çš„3Dé‡å»ºæŠ€æœ¯ï¼Œå¸¦æ‚¨æ²‰æµ¸å¼ä½“éªŒçŸ¥è¯†æ®¿å ‚çš„é­…åŠ›
                </p>
            </div>

            <div class="scenes-grid">
                <div class="scene-card">
                    <!-- å»ºç­‘ç±»å›¾æ ‡ -->
                    <div class="card-icon">
                        <i class="fas fa-university"></i>  <!-- å¤§å­¦/æœºæ„å›¾æ ‡ -->
                    </div>
                    <div class="card-content">
                        <h3>å›¾ä¹¦é¦†å¤§å…</h3>
                        <p>å®ä¼Ÿå…¥å£ç©ºé—´ï¼Œå±•ç°å»ºç­‘æ°”åŠ¿ä¸è®¾è®¡ç¾å­¦</p>
                        <button class="view-btn" onclick="openDemo('lobby', [['mode', '0']])">è¿›å…¥å‚è§‚</button>
                    </div>
                </div>
            
                <div class="scene-card">
                    <!-- é˜…è¯»ç±»å›¾æ ‡ -->
                    <div class="card-icon">
                        <i class="fas fa-book-reader"></i>  <!-- é˜…è¯»è€…å›¾æ ‡ -->
                    </div>
                    <div class="card-content">
                        <h3>é˜…è¯»åŒº</h3>
                        <p>å®‰é™èˆ’é€‚çš„é˜…è¯»ç¯å¢ƒï¼Œé€‚åˆæ·±åº¦é˜…è¯»ä¸æ€è€ƒ</p>
                        <button class="view-btn" onclick="openDemo('reading-area', [['mode', '0']])">è¿›å…¥å‚è§‚</button>
                    </div>
                </div>
            
                <div class="scene-card">
                    <!-- å­¦ä¹ ç±»å›¾æ ‡ -->
                    <div class="card-icon">
                        <i class="fas fa-graduation-cap"></i>  <!-- æ¯•ä¸šå¸½å›¾æ ‡ -->
                    </div>
                    <div class="card-content">
                        <h3>è‡ªä¹ åŒº</h3>
                        <p>å­¦å­å‹¤å¥‹å­¦ä¹ çš„æ ¸å¿ƒåŒºåŸŸï¼Œè§è¯æ¢¦æƒ³çš„å­•è‚²</p>
                        <button class="view-btn" onclick="openDemo('study-area', [['mode', '0']])">è¿›å…¥å‚è§‚</button>
                    </div>
                </div>
            </div>
  
            <!-- åœ¨æ¬¢è¿åŒºåŸŸä¹‹åï¼Œåœºæ™¯ç½‘æ ¼ä¹‹å‰æ·»åŠ ç‰¹è‰²æœåŠ¡ -->
<section class="features-section">
    <h2 class="section-title">å›¾ä¹¦é¦†ç‰¹è‰²æœåŠ¡</h2>
    <div class="features-grid">
      <div class="feature-item">
        <div class="feature-icon">
            <i class="fas fa-database"></i>  <!-- æ”¹ä¸ºæ•°æ®åº“å›¾æ ‡ -->
        </div>
        <h3 class="feature-title">æ•°å­—èµ„æºè®¿é—®</h3>
        <p class="feature-description">æä¾›ä¸°å¯Œçš„ç”µå­å›¾ä¹¦ã€æœŸåˆŠå’Œæ•°æ®åº“èµ„æºï¼Œéšæ—¶éšåœ°è®¿é—®å­¦æœ¯èµ„æ–™</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas fa-users"></i>
        </div>
        <h3 class="feature-title">ç ”è®¨ç©ºé—´</h3>
        <p class="feature-description">é…å¤‡å…ˆè¿›è®¾å¤‡çš„å°ç»„å­¦ä¹ ç©ºé—´ï¼Œæ”¯æŒåä½œå­¦ä¹ å’Œå­¦æœ¯è®¨è®º</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas fa-graduation-cap"></i>
        </div>
        <h3 class="feature-title">ä¿¡æ¯ç´ å…»åŸ¹è®­</h3>
        <p class="feature-description">å®šæœŸä¸¾åŠä¿¡æ¯æ£€ç´¢ã€å­¦æœ¯å†™ä½œç­‰åŸ¹è®­è¯¾ç¨‹ï¼Œæå‡è¯»è€…ä¿¡æ¯ç´ å…»</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas fa-headset"></i>
        </div>
        <h3 class="feature-title">å­¦ç§‘æœåŠ¡</h3>
        <p class="feature-description">ä¸“ä¸šå­¦ç§‘é¦†å‘˜æä¾›é’ˆå¯¹æ€§çš„æ–‡çŒ®æ£€ç´¢ä¸å­¦æœ¯æ”¯æŒæœåŠ¡</p>
      </div>
    </div>
  </section>
  
  <!-- åœ¨åœºæ™¯ç½‘æ ¼ä¹‹åï¼Œé¡µè„šä¹‹å‰æ·»åŠ å›¾ä¹¦é¦†ä¿¡æ¯ -->
  <section class="library-info-section">
    <h2 class="section-title">å›¾ä¹¦é¦†ä¿¡æ¯</h2>
    <div class="library-info-grid">
      <div class="info-card">
        <div class="info-card-header">
          <i class="fas fa-clock"></i>
          <h3>å¼€æ”¾æ—¶é—´</h3>
        </div>
        <ul class="info-list">
          <li>
            <i class="fas fa-calendar-day"></i>
            <div class="info-content">
              <strong>å‘¨ä¸€è‡³å‘¨æ—¥</strong>
              <span>8:00-22:00</span>
            </div>
          </li>
          <li>
            <i class="fas fa-exclamation-circle"></i>
            <div class="info-content">
              <strong>èŠ‚å‡æ—¥</strong>
              <span>9:00-17:00</span>
            </div>
          </li>
          <li>
            <i class="fas fa-book"></i>
            <div class="info-content">
              <strong>å€Ÿè¿˜æœåŠ¡</strong>
              <span>8:30-21:30</span>
            </div>
          </li>
        </ul>
      </div>
      
      <div class="info-card">
        <div class="info-card-header">
          <i class="fas fa-map-marker-alt"></i>
          <h3>è”ç³»æˆ‘ä»¬</h3>
        </div>
        <ul class="info-list">
          <li>
            <i class="fas fa-location-dot"></i>
            <div class="info-content">
              <strong>åœ°å€</strong>
              <span>åŒ—äº¬å¸‚å¤§å…´åŒºå…´åå¤§è¡—(äºŒæ®µ)1å·</span>
            </div>
          </li>
          <li>
            <i class="fas fa-phone"></i>
            <div class="info-content">
              <strong>ç”µè¯</strong>
              <span>010-60261114</span>
            </div>
          </li>
          <li>
            <i class="fas fa-envelope"></i>
            <div class="info-content">
              <strong>é‚®ç®±</strong>
              <span>library@bigc.edu.cn</span>
            </div>
          </li>
        </ul>
      </div>
      
      <div class="info-card">
        <div class="info-card-header">
          <i class="fas fa-bookmark"></i>
          <h3>é¦†è—ç‰¹è‰²</h3>
        </div>
        <ul class="info-list">
          <li>
            <i class="fas fa-print"></i>
            <div class="info-content">
              <strong>å°åˆ·å‡ºç‰ˆ</strong>
              <span>ä¸“ä¸šæ–‡çŒ®èµ„æº</span>
            </div>
          </li>
          <li>
            <i class="fas fa-paint-brush"></i>
            <div class="info-content">
              <strong>è‰ºæœ¯è®¾è®¡</strong>
              <span>ç‰¹è‰²é¦†è—</span>
            </div>
          </li>
          <li>
            <i class="fas fa-newspaper"></i>
            <div class="info-content">
              <strong>æ•°å­—åª’ä½“</strong>
              <span>å‰æ²¿èµ„æº</span>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </section>
  

        </main>




        
        <script>
            // ==================== é¢„è§ˆç³»ç»Ÿæ ¸å¿ƒä»£ç  ====================

            // ç§»åŠ¨è®¾å¤‡æ£€æµ‹
            function isMobileDevice() {
                return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            }

            // åœºæ™¯æ•°æ®é…ç½®
            const SCENE_DATA = {
                'lobby': {
                    title: 'å›¾ä¹¦é¦†å¤§å…',
                    description: 'å®ä¼Ÿçš„å›¾ä¹¦é¦†å¤§å…ï¼Œå±•ç°äº†ç°ä»£å»ºç­‘ä¸å®ç”¨åŠŸèƒ½çš„ç»“åˆã€‚è¿™é‡Œæ˜¯åŒ—å°å­¦å­è¿›å…¥çŸ¥è¯†ä¸–ç•Œçš„ç¬¬ä¸€ç«™ï¼Œå®½æ•çš„ç©ºé—´å’Œç²¾å¿ƒè®¾è®¡çš„å…‰çº¿è¥é€ å‡ºæ¸©é¦¨çš„æ°›å›´ã€‚',
                    area: '280å¹³æ–¹ç±³',
                    capacity: 'å¯å®¹çº³70äºº',
                    features: 'æŒ‘é«˜è®¾è®¡ã€è‡ªç„¶é‡‡å…‰ã€æ™ºèƒ½å¯¼è§ˆ',
                    image: './assets/images/lobby.png'
                },
                'reading-area': {
                    title: 'é˜…è¯»åŒº',
                    description: 'å®‰é™èˆ’é€‚çš„é˜…è¯»åŒºåŸŸï¼Œé…å¤‡ä¸“ä¸šçš„é˜…è¯»ç¯å…‰å’Œç¬¦åˆäººä½“å·¥å­¦çš„åº§æ¤…ã€‚è¿™é‡Œæ˜¯æ·±åº¦é˜…è¯»å’Œæ€è€ƒçš„ç†æƒ³ç©ºé—´ï¼Œé˜³å…‰é€è¿‡çª—æˆ·æ´’åœ¨ä¹¦é¡µä¸Šï¼Œè¥é€ å‡ºå®é™çš„é˜…è¯»ä½“éªŒã€‚',
                    area: '100å¹³æ–¹ç±³',
                    capacity: '30ä¸ªé˜…è¯»ä½',
                    features: 'ä¸“ä¸šç…§æ˜ã€èˆ’é€‚åº§æ¤…ã€å®‰é™ç¯å¢ƒ',
                    image: './assets/images/read.png'
                },
                'study-area': {
                    title: 'è‡ªä¹ åŒº',
                    description: 'åŒ—å°å­¦å­å‹¤å¥‹å­¦ä¹ çš„æ ¸å¿ƒåŒºåŸŸã€‚æ•´é½æ’åˆ—çš„å­¦ä¹ æ¡Œæ¤…ã€å……è¶³çš„ç”µæºæ¥å£å’Œç¨³å®šçš„ç½‘ç»œç¯å¢ƒï¼Œä¸ºå­¦ç”Ÿä»¬æä¾›äº†é«˜æ•ˆçš„å­¦ä¹ ç©ºé—´ã€‚è¿™é‡Œè§è¯äº†æ— æ•°æ¢¦æƒ³çš„å­•è‚²å’Œå®ç°ã€‚',
                    area: '200å¹³æ–¹ç±³',
                    capacity: '120ä¸ªå­¦ä¹ ä½',
                    features: 'ç‹¬ç«‹åº§ä½ã€ç”µæºæ¥å£ã€é«˜é€Ÿç½‘ç»œ',
                    image: './assets/images/study.png'
                }
            };

            // é¢„è§ˆç³»ç»Ÿä¸»ç±»
            class PreviewSystem {
                constructor() {
                    this.isInitialized = false;
                    this.init();
                }

                init() {
                    if (this.isInitialized) return;
                    
                    console.log('ğŸš€ åˆå§‹åŒ–é¢„è§ˆç³»ç»Ÿ...');
                    this.createPreviewElements();
                    this.setupEventListeners();
                    this.isInitialized = true;
                    console.log('âœ… é¢„è§ˆç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');
                }

                createPreviewElements() {
                    // åˆ›å»ºæ‚¬åœé¢„è§ˆå·¥å…·æç¤º
                    this.createHoverTooltip();
                    
                    // åˆ›å»ºè¯¦æƒ…é¢„è§ˆæ¨¡æ€æ¡†
                    this.createDetailModal();
                }

                createHoverTooltip() {
                    const tooltip = document.createElement('div');
                    tooltip.id = 'preview-hover-tooltip';
                    tooltip.className = 'preview-tooltip';
                    tooltip.innerHTML = `
                        <div class="tooltip-image"></div>
                        <div class="tooltip-content">
                            <h4 class="tooltip-title"></h4>
                            <p class="tooltip-desc"></p>
                            <div class="tooltip-hint">ğŸ“± ç‚¹å‡»é¢„è§ˆæŒ‰é’®æŸ¥çœ‹è¯¦æƒ…</div>
                        </div>
                    `;
                    document.body.appendChild(tooltip);
                }

                createDetailModal() {
                    const modal = document.createElement('div');
                    modal.id = 'preview-detail-modal';
                    modal.className = 'preview-modal';
                    modal.innerHTML = `
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3 class="modal-title">åœºæ™¯é¢„è§ˆ</h3>
                                <button class="modal-close">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="modal-image-container">
                                    <img class="modal-image" src="" alt="åœºæ™¯é¢„è§ˆ">
                                </div>
                                <div class="modal-info">
                                    <p class="modal-description"></p>
                                    <div class="modal-stats">
                                        <div class="stat-item">
                                            <span class="stat-icon">ğŸ›ï¸</span>
                                            <div class="stat-content">
                                                <div class="stat-label">ç©ºé—´é¢ç§¯</div>
                                                <div class="stat-value" id="stat-area"></div>
                                            </div>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">ğŸ‘¥</span>
                                            <div class="stat-content">
                                                <div class="stat-label">å®¹çº³äººæ•°</div>
                                                <div class="stat-value" id="stat-capacity"></div>
                                            </div>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">â­</span>
                                            <div class="stat-content">
                                                <div class="stat-label">ç‰¹è‰²åŠŸèƒ½</div>
                                                <div class="stat-value" id="stat-features"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button class="modal-btn modal-btn-primary" id="enter-scene-btn">ğŸš€ è¿›å…¥åœºæ™¯</button>
                                <button class="modal-btn modal-btn-secondary" id="auto-tour-btn">ğŸ¬ è‡ªåŠ¨å¯¼è§ˆ</button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(modal);
                }

                setupEventListeners() {
                    // å…³é—­æ¨¡æ€æ¡†äº‹ä»¶
                    const closeBtn = document.querySelector('.modal-close');
                    const modal = document.getElementById('preview-detail-modal');
                    
                    if (closeBtn) {
                        closeBtn.addEventListener('click', () => this.hideDetailModal());
                    }
                    
                    if (modal) {
                        modal.addEventListener('click', (e) => {
                            if (e.target === modal) {
                                this.hideDetailModal();
                            }
                        });
                    }

                    // ESCé”®å…³é—­
                    document.addEventListener('keydown', (e) => {
                        if (e.key === 'Escape') {
                            this.hideDetailModal();
                        }
                    });
                }

                showHoverPreview(sceneId, element, event) {
                    if (isMobileDevice()) return;
                    
                    const sceneData = SCENE_DATA[sceneId];
                    if (!sceneData) return;

                    const tooltip = document.getElementById('preview-hover-tooltip');
                    if (!tooltip) return;

                    // æ›´æ–°å†…å®¹
                    tooltip.querySelector('.tooltip-image').style.backgroundImage = `url(${sceneData.image})`;
                    tooltip.querySelector('.tooltip-title').textContent = sceneData.title;
                    tooltip.querySelector('.tooltip-desc').textContent = sceneData.description;

                    // å®šä½
                    const rect = element.getBoundingClientRect();
                    const tooltipRect = tooltip.getBoundingClientRect();
                    
                    let left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);
                    let top = rect.bottom + 10;

                    // è¾¹ç•Œæ£€æŸ¥
                    if (left < 10) left = 10;
                    if (left + tooltipRect.width > window.innerWidth - 10) {
                        left = window.innerWidth - tooltipRect.width - 10;
                    }
                    if (top + tooltipRect.height > window.innerHeight - 10) {
                        top = rect.top - tooltipRect.height - 10;
                    }

                    tooltip.style.left = left + 'px';
                    tooltip.style.top = top + 'px';
                    tooltip.classList.add('active');
                }

                hideHoverPreview() {
                    const tooltip = document.getElementById('preview-hover-tooltip');
                    if (tooltip) {
                        tooltip.classList.remove('active');
                    }
                }

                showDetailModal(sceneId) {
                    const sceneData = SCENE_DATA[sceneId];
                    if (!sceneData) return;

                    const modal = document.getElementById('preview-detail-modal');
                    if (!modal) return;

                    // æ›´æ–°å†…å®¹
                    modal.querySelector('.modal-title').textContent = sceneData.title;
                    modal.querySelector('.modal-image').src = sceneData.image;
                    modal.querySelector('.modal-description').textContent = sceneData.description;
                    document.getElementById('stat-area').textContent = sceneData.area;
                    document.getElementById('stat-capacity').textContent = sceneData.capacity;
                    document.getElementById('stat-features').textContent = sceneData.features;

                    // è®¾ç½®æŒ‰é’®äº‹ä»¶
                    const enterBtn = document.getElementById('enter-scene-btn');
                    const tourBtn = document.getElementById('auto-tour-btn');

                    enterBtn.onclick = () => {
                        this.hideDetailModal();
                        openDemo(sceneId, [['mode', '0']]);
                    };

                    // ğŸ†• ä¿®å¤è‡ªåŠ¨å¯¼è§ˆæŒ‰é’®äº‹ä»¶
                    tourBtn.onclick = () => {
                        this.hideDetailModal();
                        console.log(`ğŸš€ å¯åŠ¨è‡ªåŠ¨å¯¼è§ˆ: ${sceneData.title}`);
                        
                        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                        this.showAutoTourLoading(sceneData.title);
                        
                        // è®¾ç½®è‡ªåŠ¨è§¦å‘æ ‡è®°
                        localStorage.setItem('autoTriggerSpacebar', 'true');
                        localStorage.setItem('autoTriggerScene', sceneId);
                        localStorage.setItem('autoTriggerTime', Date.now().toString());
                        
                        // æ„å»ºURL
                        const params = new URLSearchParams({
                            mode: '0'
                        });
                        
                        const targetUrl = `${sceneId}.html?${params.toString()}`;
                        console.log('å¯¼èˆªURL:', targetUrl);
                        
                        // å»¶è¿Ÿè·³è½¬
                        setTimeout(() => {
                            window.location.href = targetUrl;
                        }, 1000);
                    };

                    // æ˜¾ç¤ºæ¨¡æ€æ¡†
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }

                hideDetailModal() {
                    const modal = document.getElementById('preview-detail-modal');
                    if (modal) {
                        modal.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                }

                // ğŸ†• æ·»åŠ è‡ªåŠ¨å¯¼è§ˆåŠ è½½æç¤ºæ–¹æ³•
                showAutoTourLoading(sceneName) {
                    const loadingHTML = `
                        <div id="autotour-loading" style="
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            background: rgba(0, 0, 0, 0.9);
                            backdrop-filter: blur(10px);
                            display: flex;
                            flex-direction: column;
                            justify-content: center;
                            align-items: center;
                            color: white;
                            z-index: 100000;
                            font-family: 'Microsoft YaHei', sans-serif;
                        ">
                            <div style="
                                background: rgba(15, 23, 42, 0.95);
                                border: 2px solid rgba(79, 172, 254, 0.5);
                                border-radius: 20px;
                                padding: 3rem;
                                text-align: center;
                                max-width: 400px;
                                animation: pulse 2s infinite;
                            ">
                                <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸš€</div>
                                <h2 style="color: #4facfe; margin-bottom: 1rem;">å‡†å¤‡è‡ªåŠ¨å¯¼è§ˆ</h2>
                                <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">æ­£åœ¨è¿›å…¥ <strong>${sceneName}</strong></p>
                                <p style="opacity: 0.8; margin-bottom: 2rem;">ç³»ç»Ÿå°†è‡ªåŠ¨å¸¦æ‚¨æ¸¸è§ˆæ‰€æœ‰æœ€ä½³è§‚æ™¯ç‚¹</p>
                                <div style="
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    gap: 1rem;
                                    margin-bottom: 1rem;
                                ">
                                    <div class="loading-dot" style="
                                        width: 12px;
                                        height: 12px;
                                        background: #4facfe;
                                        border-radius: 50%;
                                        animation: bounce 1.4s infinite ease-in-out;
                                    "></div>
                                    <div class="loading-dot" style="
                                        width: 12px;
                                        height: 12px;
                                        background: #00f2fe;
                                        border-radius: 50%;
                                        animation: bounce 1.4s infinite ease-in-out;
                                        animation-delay: 0.2s;
                                    "></div>
                                    <div class="loading-dot" style="
                                        width: 12px;
                                        height: 12px;
                                        background: #4facfe;
                                        border-radius: 50%;
                                        animation: bounce 1.4s infinite ease-in-out;
                                        animation-delay: 0.4s;
                                    "></div>
                                </div>
                                <div style="font-size: 0.9rem; opacity: 0.6;">
                                    è¯·ç¨å€™...
                                </div>
                            </div>
                        </div>
                        <style>
                            @keyframes pulse {
                                0%, 100% { transform: scale(1); }
                                50% { transform: scale(1.02); }
                            }
                            @keyframes bounce {
                                0%, 80%, 100% { transform: scale(0); }
                                40% { transform: scale(1); }
                            }
                        </style>
                    `;
                    
                    document.body.insertAdjacentHTML('beforeend', loadingHTML);
                    
                    // 5ç§’åè‡ªåŠ¨ç§»é™¤ï¼ˆé˜²æ­¢å¡ä½ï¼‰
                    setTimeout(() => {
                        const loading = document.getElementById('autotour-loading');
                        if (loading) loading.remove();
                    }, 5000);
                }
            }

       // ==================== ä¿®å¤ç‰ˆé¢„è§ˆç³»ç»Ÿ ====================

/**
 * åˆå§‹åŒ–åœºæ™¯é¢„è§ˆåŠŸèƒ½ - ä¿®å¤ç‰ˆ
 */
function initializeScenePreviews() {
    console.log('ğŸ¯ å¼€å§‹ä¸ºåœºæ™¯å¡ç‰‡æ·»åŠ é¢„è§ˆåŠŸèƒ½...');
    
    // ç¡®ä¿é¢„è§ˆç³»ç»Ÿå·²åˆå§‹åŒ–
    if (!window.previewSystem) {
        window.previewSystem = new PreviewSystem();
    }

    const sceneCards = document.querySelectorAll('.scene-card');
    console.log(`æ‰¾åˆ° ${sceneCards.length} ä¸ªåœºæ™¯å¡ç‰‡`);

    sceneCards.forEach((card, index) => {
        const sceneIds = ['lobby', 'reading-area', 'study-area'];
        const sceneId = sceneIds[index];
        
        if (!sceneId) {
            console.warn('âŒ æœªæ‰¾åˆ°å¯¹åº”çš„åœºæ™¯ID:', index);
            return;
        }

        console.log(`ğŸ”„ å¤„ç†åœºæ™¯å¡ç‰‡ ${index + 1}:`, sceneId);

        // ä¿®å¤ï¼šæ·»åŠ é¢„è§ˆæŒ‰é’®
        this.addPreviewButtonToCard(card, sceneId);
        
        // æ·»åŠ æ‚¬åœæ•ˆæœï¼ˆä»…æ¡Œé¢ç«¯ï¼‰
        if (!this.isMobileDevice()) {
            card.addEventListener('mouseenter', (e) => {
                window.previewSystem.showHoverPreview(sceneId, card, e);
            });
            
            card.addEventListener('mouseleave', () => {
                window.previewSystem.hideHoverPreview();
            });
        }

        console.log(`âœ… ä¸º"${SCENE_DATA[sceneId]?.title}"æ·»åŠ é¢„è§ˆåŠŸèƒ½`);
    });
}

/**
 * ä¸ºå¡ç‰‡æ·»åŠ é¢„è§ˆæŒ‰é’® - ä¿®å¤ç‰ˆ
 */
function addPreviewButtonToCard(card, sceneId) {
    console.log(`ğŸ”„ ä¸ºåœºæ™¯ ${sceneId} æ·»åŠ é¢„è§ˆæŒ‰é’®`);
    
    // ä¿®å¤ï¼šä½¿ç”¨æ›´å¯é çš„é€‰æ‹©å™¨
    const viewBtn = card.querySelector('.view-btn');
    if (!viewBtn) {
        console.error('âŒ æœªæ‰¾åˆ°è¿›å…¥æŒ‰é’®:', sceneId, card);
        
        // å¤‡ç”¨æ–¹æ¡ˆï¼šæ‰‹åŠ¨åˆ›å»ºæŒ‰é’®å®¹å™¨
        this.createFallbackButtonContainer(card, sceneId);
        return;
    }

    // åˆ›å»ºæŒ‰é’®å®¹å™¨
    const buttonContainer = document.createElement('div');
    buttonContainer.className = 'card-button-container';

    // åˆ›å»ºé¢„è§ˆæŒ‰é’®
    const previewBtn = document.createElement('button');
    previewBtn.className = 'preview-button';
    previewBtn.innerHTML = 'ğŸ‘ï¸ é¢„è§ˆ';
    previewBtn.onclick = (e) => {
        e.preventDefault();
        e.stopPropagation();
        console.log('ğŸ“¸ æ‰“å¼€é¢„è§ˆ:', sceneId);
        window.previewSystem.showDetailModal(sceneId);
    };

    // è°ƒæ•´åŸæŒ‰é’®
    viewBtn.className = 'view-button primary';
    viewBtn.textContent = 'è¿›å…¥åœºæ™¯'; // ä¿®å¤ï¼šç¡®ä¿æ–‡æœ¬å†…å®¹
    viewBtn.onclick = (e) => {
        e.preventDefault();
        e.stopPropagation();
        console.log('ğŸš€ è¿›å…¥åœºæ™¯:', sceneId);
        this.openDemo(sceneId, [['mode', '0']]);
    };

    // ç»„è£…æŒ‰é’®
    buttonContainer.appendChild(previewBtn);
    buttonContainer.appendChild(viewBtn);

    // æ›¿æ¢åŸæŒ‰é’®
    const cardContent = card.querySelector('.card-content');
    if (cardContent) {
        const oldViewBtn = cardContent.querySelector('.view-btn');
        if (oldViewBtn && oldViewBtn.parentNode) {
            oldViewBtn.parentNode.removeChild(oldViewBtn);
        }
        cardContent.appendChild(buttonContainer);
        
        console.log(`âœ… æˆåŠŸä¸º ${sceneId} æ·»åŠ æŒ‰é’®å®¹å™¨`);
    } else {
        console.error('âŒ æœªæ‰¾åˆ°å¡ç‰‡å†…å®¹åŒºåŸŸ:', card);
    }
}



/**
 * ç§»åŠ¨è®¾å¤‡æ£€æµ‹ - ä¿®å¤ç‰ˆ
 */
function isMobileDevice() {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

/**
 * æ‰“å¼€åœºæ™¯ - ä¿®å¤ç‰ˆ
 */
function openDemo(page, params) {
    let url = page + '.html';
    if (params && params.length > 0) {
        let index = 0;
        for (let param of params) {
            url += (index === 0 ? "?" : "&");
            url += param[0] + "=" + param[1];
            index++;
        }
    }
    console.log('ğŸ”— å¯¼èˆªåˆ°:', url);
    window.location.href = url;
}

            // ä¸ºå¡ç‰‡æ·»åŠ é¢„è§ˆæŒ‰é’®
            function addPreviewButtonToCard(card, sceneId) {
                const viewBtn = card.querySelector('.view-btn');
                if (!viewBtn) {
                    console.warn('âŒ æœªæ‰¾åˆ°è¿›å…¥æŒ‰é’®:', sceneId);
                    return;
                }

                // åˆ›å»ºæŒ‰é’®å®¹å™¨
                const buttonContainer = document.createElement('div');
                buttonContainer.className = 'card-button-container';

                // åˆ›å»ºé¢„è§ˆæŒ‰é’®
                const previewBtn = document.createElement('button');
                previewBtn.className = 'preview-button';
                previewBtn.innerHTML = 'ğŸ‘ï¸ é¢„è§ˆ';
                previewBtn.onclick = (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ğŸ“¸ æ‰“å¼€é¢„è§ˆ:', sceneId);
                    window.previewSystem.showDetailModal(sceneId);
                };

                // è°ƒæ•´åŸæŒ‰é’®
                viewBtn.className = 'view-button primary';
                viewBtn.onclick = (e) => {
                    e.preventDefault();
                    openDemo(sceneId, [['mode', '0']]);
                };

                // ç»„è£…æŒ‰é’®
                buttonContainer.appendChild(previewBtn);
                buttonContainer.appendChild(viewBtn);

                // æ›¿æ¢åŸæŒ‰é’®
                const cardContent = card.querySelector('.card-content');
                const oldViewBtn = cardContent.querySelector('.view-btn');
                if (oldViewBtn) {
                    cardContent.removeChild(oldViewBtn);
                }
                cardContent.appendChild(buttonContainer);
            }

          // ==================== ä¿®å¤ç‰ˆåˆå§‹åŒ–ä»£ç  ====================

// DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ“„ DOMåŠ è½½å®Œæˆï¼Œåˆå§‹åŒ–é¢„è§ˆç³»ç»Ÿ');
    
    // å»¶è¿Ÿåˆå§‹åŒ–ä»¥ç¡®ä¿æ‰€æœ‰å…ƒç´ éƒ½å·²åŠ è½½
    setTimeout(() => {
        try {
            initializeScenePreviews();
            
            // æ˜¾ç¤ºåˆå§‹åŒ–æˆåŠŸæ¶ˆæ¯
            setTimeout(() => {
                console.log('ğŸ‰ é¢„è§ˆç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸï¼');
                console.log('ğŸ’¡ ä½¿ç”¨æ–¹æ³•ï¼š');
                console.log('   - é¼ æ ‡æ‚¬åœæŸ¥çœ‹å¿«é€Ÿé¢„è§ˆ');
                console.log('   - ç‚¹å‡»"é¢„è§ˆ"æŒ‰é’®æŸ¥çœ‹è¯¦æƒ…');
                console.log('   - ç‚¹å‡»"è¿›å…¥åœºæ™¯"å¼€å§‹ä½“éªŒ');
                console.log('   - ç‚¹å‡»"è‡ªåŠ¨å¯¼è§ˆ"è‡ªåŠ¨æ¸¸è§ˆ');
                
                // è°ƒè¯•ä¿¡æ¯
                const cards = document.querySelectorAll('.scene-card');
                cards.forEach((card, index) => {
                    const buttons = card.querySelectorAll('button');
                    console.log(`å¡ç‰‡ ${index + 1} æŒ‰é’®æ•°é‡:`, buttons.length);
                });
            }, 100);
        } catch (error) {
            console.error('âŒ é¢„è§ˆç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥:', error);
            // å¤‡ç”¨åˆå§‹åŒ–æ–¹æ¡ˆ
            fallbackInitialization();
        }
    }, 500);
});

// å¤‡ç”¨åˆå§‹åŒ–æ–¹æ¡ˆ
function fallbackInitialization() {
    console.log('ğŸ”„ å¯åŠ¨å¤‡ç”¨åˆå§‹åŒ–æ–¹æ¡ˆ');
    
    const sceneCards = document.querySelectorAll('.scene-card');
    const sceneIds = ['lobby', 'reading-area', 'study-area'];
    
    sceneCards.forEach((card, index) => {
        const sceneId = sceneIds[index];
        if (!sceneId) return;
        
        // ç›´æ¥åˆ›å»ºæŒ‰é’®å®¹å™¨
        createFallbackButtonContainer(card, sceneId);
    });
    
    console.log('âœ… å¤‡ç”¨åˆå§‹åŒ–å®Œæˆ');
}

// å¤‡ç”¨åˆå§‹åŒ–æ–¹æ³•
window.addEventListener('load', function() {
    console.log('ğŸ”„ é¡µé¢å®Œå…¨åŠ è½½ï¼Œæ£€æŸ¥é¢„è§ˆç³»ç»Ÿ');
    
    // æ£€æŸ¥æ˜¯å¦æˆåŠŸåˆå§‹åŒ–
    const buttonContainers = document.querySelectorAll('.card-button-container');
    if (buttonContainers.length === 0) {
        console.log('ğŸ”„ æ£€æµ‹åˆ°åˆå§‹åŒ–å¤±è´¥ï¼Œé‡æ–°åˆå§‹åŒ–');
        setTimeout(fallbackInitialization, 300);
    }
});

            // ==================== é€šç”¨å‡½æ•° ====================

            function openDemo(page, params) {
                let url = page + '.html';
                if (params && params.length > 0) {
                    let index = 0;
                    for (let param of params) {
                        url += (index === 0 ? "?" : "&");
                        url += param[0] + "=" + param[1];
                        index++;
                    }
                }
                console.log('ğŸ”— å¯¼èˆªåˆ°:', url);
                window.location.href = url;
            }
        </script>

        <!-- åœ¨æ‰€æœ‰HTMLæ–‡ä»¶çš„bodyæœ«å°¾æ·»åŠ  -->
        <script src="js/page-transitions.js"></script>
        <script src="js/performance.js"></script>
        <script src="js/visit-stats.js"></script>
        <script src="js/index_performance_panel.js"></script>
        <script src="js/index_KeyboardNav.js"></script>

   
    </div>   
    
    
    
    <!-- ä¿®æ”¹é¡µè„šå†…å®¹ -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo">
        <h3>åŒ—äº¬å°åˆ·å­¦é™¢å›¾ä¹¦é¦†</h3>
        <p>æ™ºæ…§å›¾ä¹¦é¦†æœåŠ¡å¹³å°</p>
      </div>
      <div class="footer-info">
        <p><i class="fas fa-location-dot"></i> åŒ—äº¬å¸‚å¤§å…´åŒºå…´åå¤§è¡—(äºŒæ®µ)1å·</p>
        <p><i class="fas fa-phone"></i> 010-60261114</p>
        <p><i class="fas fa-envelope"></i> library@bigc.edu.cn</p>
      </div>
      <div class="footer-hours">
        <p><i class="fas fa-clock"></i> å¼€æ”¾æ—¶é—´ï¼šå‘¨ä¸€è‡³å‘¨æ—¥ 8:00-22:00</p>
        <p><i class="fas fa-book"></i> å€Ÿè¿˜æœåŠ¡ï¼š8:30-21:30</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 åŒ—äº¬å°åˆ·å­¦é™¢å›¾ä¹¦é¦† ç‰ˆæƒæ‰€æœ‰ </p>
    </div>
  </footer>
</body>
</html>